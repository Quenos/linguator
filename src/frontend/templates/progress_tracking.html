{% extends "base.html" %}

{% block title %}{{ _('Progress Tracking') }}{% endblock %}

{% block head_extra %}
    <!-- Add page-specific styles here if needed, or keep them in base.html -->
    <style>
        /* Styles specific to progress tracking */
        .stats-container { margin-top: 20px; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        .stat-item { margin-bottom: 10px; }
        .stat-label { font-weight: bold; }
        #loading-state { color: #888; }
        #error-state { color: red; display: none; }
    </style>
{% endblock %}

{% block content %}
    <h1>{{ _('Progress Tracking') }}</h1>

    <div id="loading-state">{{ _('Loading statistics...') }}</div>
    <div id="error-state">{{ _('Failed to load statistics. Please try again later.') }}</div>

    <div id="stats-content" class="stats-container" style="display: none;">
        <div class="stat-item">
            <span class="stat-label">{{ _('Total Unique Words Practiced:') }}</span>
            <span id="total-words">--</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">{{ _('Overall Accuracy:') }}</span>
            <span id="accuracy">--</span>%
        </div>
    </div>

    <!-- Specific JS for this page -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const loadingState = document.getElementById('loading-state');
            const errorState = document.getElementById('error-state');
            const statsContent = document.getElementById('stats-content');
            const totalWordsSpan = document.getElementById('total-words');
            const accuracySpan = document.getElementById('accuracy');

            fetch('/progress/stats')
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    totalWordsSpan.textContent = data.total_unique_words_practiced;
                    // Format accuracy to 1 decimal place
                    accuracySpan.textContent = parseFloat(data.overall_accuracy_percentage).toFixed(1);

                    loadingState.style.display = 'none';
                    errorState.style.display = 'none';
                    statsContent.style.display = 'block';
                })
                .catch(error => {
                    console.error('Error fetching progress stats:', error);
                    loadingState.style.display = 'none';
                    statsContent.style.display = 'none';
                    errorState.style.display = 'block';
                });
        });
    </script>

    <!-- Removed navigation links as they are now in base.html -->

{% endblock %} 